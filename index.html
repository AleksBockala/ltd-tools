<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LTD ROI Calculator</title>
    <style>
        :root {
            --bg: #0a0b10;
            --card: #161821;
            --primary: #00f2fe;
            --accent: #4facfe;
            --danger: #ff4455;
            --success: #00ff88;
            --text: #e0e0e0;
        }

        body {
            background: var(--bg);
            color: var(--text);
            font-family: 'Segoe UI', Roboto, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .calculator-card {
            background: var(--card);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            width: 100%;
            max-width: 500px;
            border: 1px solid #2a2c3a;
        }

        h2 { text-align: center; margin-top: 0; color: var(--primary); }

        .input-group { margin-bottom: 1.5rem; }
        
        label { display: block; margin-bottom: 0.5rem; font-size: 0.9rem; color: #888; }
        
        input {
            width: 100%;
            background: #0a0b10;
            border: 1px solid #333;
            padding: 12px;
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            box-sizing: border-box;
            outline: none;
        }

        input:focus { border-color: var(--primary); }

        .result-panel {
            background: #0a0b10;
            padding: 1rem;
            border-radius: 12px;
            margin-top: 1rem;
            text-align: center;
        }

        .roi-value { font-size: 1.5rem; font-weight: bold; color: var(--success); }

        #graph-container {
            margin-top: 2rem;
            height: 200px;
            width: 100%;
        }

        .chart-line-saas { stroke: var(--danger); stroke-width: 3; fill: none; }
        .chart-line-ltd { stroke: var(--success); stroke-width: 3; fill: none; }
    </style>
</head>
<body>

<div class="calculator-card">
    <h2>LTD Калькулятор</h2>
    
    <div class="input-group">
        <label>Стоимость подписки в месяц ($)</label>
        <input type="number" id="monthly" value="20" oninput="updateChart()">
    </div>

    <div class="input-group">
        <label>Стоимость LTD лицензии ($)</label>
        <input type="number" id="ltd" value="199" oninput="updateChart()">
    </div>

    <div class="result-panel">
        <div>Окупаемость через:</div>
        <div class="roi-value" id="roi-text">10 месяцев</div>
    </div>

    <div id="graph-container">
        <svg id="chart" width="100%" height="100%" viewBox="0 0 400 200" preserveAspectRatio="none">
            <line x1="0" y1="180" x2="400" y2="180" stroke="#333" />
            <line x1="20" y1="0" x2="20" y2="200" stroke="#333" />
            
            <path id="saas-path" class="chart-line-saas" d="" />
            <path id="ltd-path" class="chart-line-ltd" d="" />
            
            <circle id="point" cx="0" cy="0" r="5" fill="white" style="display:none" />
        </svg>
    </div>
</div>

<script>
    function updateChart() {
        const monthly = parseFloat(document.getElementById('monthly').value) || 0;
        const ltd = parseFloat(document.getElementById('ltd').value) || 0;
        const roiText = document.getElementById('roi-text');
        
        // ROI Calculation
        const monthsToROI = monthly > 0 ? (ltd / monthly).toFixed(1) : 0;
        roiText.innerText = monthsToROI + " мес.";

        // Graph Logic
        const maxMonths = 24;
        const maxCost = Math.max(ltd * 1.5, monthly * maxMonths);
        
        const saasPoints = [];
        const ltdPoints = [];

        for (let m = 0; m <= maxMonths; m++) {
            let x = 20 + (m * (380 / maxMonths));
            
            // SaaS Line
            let ySaas = 180 - ((m * monthly) / maxCost * 170);
            saasPoints.push(`${x},${ySaas}`);

            // LTD Line
            let yLtd = 180 - (ltd / maxCost * 170);
            ltdPoints.push(`${x},${yLtd}`);
        }

        document.getElementById('saas-path').setAttribute('d', 'M' + saasPoints.join(' L'));
        document.getElementById('ltd-path').setAttribute('d', 'M' + ltdPoints.join(' L'));

        // Point of Intersection
        const point = document.getElementById('point');
        if (monthsToROI > 0 && monthsToROI <= maxMonths) {
            let intersectX = 20 + (monthsToROI * (380 / maxMonths));
            let intersectY = 180 - (ltd / maxCost * 170);
            point.setAttribute('cx', intersectX);
            point.setAttribute('cy', intersectY);
            point.style.display = 'block';
        } else {
            point.style.display = 'none';
        }
    }

    // Initial run
    updateChart();
</script>

</body>
</html>